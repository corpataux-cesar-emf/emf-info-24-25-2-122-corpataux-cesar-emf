flowchart LR
    Start([Démarrage du script])
    Init[Initialisation : UTF-8 + Fichiers + Dossier]
    Menu{Menu Principal}

    Start --> Init --> Menu

    %% 1. Ajouter un tireur
    Menu --> ATF["1.Ajouter un tireur"]
    subgraph Ajouter_un_tireur
        AT1[Demander numéro fusil]
        AT2{Déjà existant ?}
        AT3[Message erreur + Retry]
        AT4[Demander infos personnelles]
        AT5[Écrire dans tireurs.csv]
        AT6[Log ajout OK]
        ATF --> AT1 --> AT2
        AT2 -- Oui --> AT3 --> AT1
        AT2 -- Non --> AT4 --> AT5 --> AT6
    end

    %% 2. Créer un concours
    Menu --> CCF["2.Créer un concours"]
    subgraph Creer_un_concours
        CC1[Demander nom concours]
        CC2{Déjà existant ?}
        CC3[Erreur + retour]
        CC4[Créer entrée CSV concours]
        CC5[Boucle: Ajouter récompenses]
        CC6[Écrire dans recompenses.csv]
        CC7[Log concours créé]
        CCF --> CC1 --> CC2
        CC2 -- Oui --> CC3
        CC2 -- Non --> CC4 --> CC5 --> CC6 --> CC7
    end

    %% 3. Entrer un résultat
    Menu --> ERF["3.Entrer un résultat"]
    subgraph Entrer_resultat
        ER1{Concours dispo ?}
        ER2[Afficher liste concours]
        ER3[Demander nom concours]
        ER4{Nom valide ?}
        ER5[Afficher tireurs]
        ER6[Boucle: Vérif tireur, créer si besoin]
        ER7[Entrer score]
        ER8[Calcul récompense]
        ER9[Ajouter au resultats.csv]
        ER10[Log résultat]
        ERF --> ER1
        ER1 -- Non --> ER10
        ER1 -- Oui --> ER2 --> ER3 --> ER4
        ER4 -- Non --> ER10
        ER4 -- Oui --> ER5 --> ER6 --> ER7 --> ER8 --> ER9 --> ER10
    end

    %% 4. Afficher un tireur
    Menu --> STF["4.Afficher un tireur"]
    subgraph Afficher_tireur
        ST1[Afficher liste tireurs]
        ST2[Demander numéro fusil]
        ST3{Tireur trouvé ?}
        ST4[Afficher infos + résultats]
        ST5[Générer page HTML]
        ST6[Écrire HTML dans fichier]
        ST7[Log HTML généré]
        STF --> ST1 --> ST2 --> ST3
        ST3 -- Non --> ST4
        ST3 -- Oui --> ST4 --> ST5 --> ST6 --> ST7
    end

    %% 5. Afficher tous les tireurs
    Menu --> SAF["5.Afficher tous les tireurs"]
    subgraph Affichage_complet
        SA1[Lire tireurs.csv]
        SA2[Lire resultats.csv]
        SA3[Boucle sur chaque tireur]
        SA4[Afficher infos + résultats]
        SAF --> SA1 --> SA2 --> SA3 --> SA4
    end

    %% 6. Quitter
    Menu --> Quit([6.Quitter le programme])
