flowchart LR
    Start([Démarrage: Get-All])
    Init[Connexion FTP & chargement CSV]
    Menu{Menu Principal}

    Start --> Init --> Menu

    %% 1. Ajouter un tireur
    Menu --> ATF["1.Ajouter un tireur"]
    subgraph Ajouter_un_tireur
        AT1[Demande numéro de fusil]
        AT2{Numéro déjà existant ?}
        AT3[Afficher erreur & logs]
        AT4[Demander infos tireur]
        AT5[Ajouter au CSV]
        AT6[Enregistrer fichier local + FTP]
        AT7[Log succès]
        ATF --> AT1 --> AT2
        AT2 -- Oui --> AT3 --> AT1
        AT2 -- Non --> AT4 --> AT5 --> AT6 --> AT7
    end

    %% 2. Créer un concours
    Menu --> ACCF["2.Créer un concours"]
    subgraph Creer_un_concours
        AC1[Demande nom concours]
        AC2{Déjà existant ?}
        AC3[Afficher erreur & logs]
        AC4[Créer concours + CSV]
        AC5[Boucle ajout récompenses]
        AC6[Enregistrer CSV + FTP]
        AC7[Log succès]
        ACCF --> AC1 --> AC2
        AC2 -- Oui --> AC3
        AC2 -- Non --> AC4 --> AC5 --> AC6 --> AC7
    end

    %% 3. Entrer un résultat
    Menu --> ARF["3.Entrer un résultat"]
    subgraph Entrer_un_resultat
        AR1{Concours dispo ?}
        AR2{Tireurs dispo ?}
        AR3[Choisir concours et tireur]
        AR4[Entrer score]
        AR5[Déterminer récompense]
        AR6[Ajouter au CSV]
        AR7[Enregistrer + log]
        ARF --> AR1
        AR1 -- Non --> AR7
        AR1 -- Oui --> AR2
        AR2 -- Non --> AR7
        AR2 -- Oui --> AR3 --> AR4 --> AR5 --> AR6 --> AR7
    end

    %% 4. Afficher un tireur
    Menu --> STF["4.Afficher un tireur (HTML)"]
    subgraph Afficher_un_tireur
        ST1[Afficher liste]
        ST2[Demander numéro]
        ST3{Trouvé ?}
        ST4[Afficher fiche]
        ST5[Générer page HTML]
        ST6[Envoyer via FTP]
        ST7[Mettre à jour index]
        STF --> ST1 --> ST2 --> ST3
        ST3 -- Non --> ST4
        ST3 -- Oui --> ST4 --> ST5 --> ST6 --> ST7
    end

    %% 5. Afficher tous les tireurs
    Menu --> SAF["5.Afficher tous les tireurs"]
    subgraph Afficher_tous
        SA1[Lire CSV tireurs]
        SA2[Afficher chaque fiche]
        SAF --> SA1 --> SA2
    end

    %% 6. Voir les logs
    Menu --> LF["6.Voir les logs"]
    subgraph Voir_les_logs
        L1[Lire log_info.txt]
        L2[Lire log_error.txt]
        L3[Afficher dans la console]
        LF --> L1 --> L2 --> L3
    end

    %% 7. Actualiser les fichiers
    Menu --> RF["7.Actualiser fichiers"]
    subgraph Actualiser_les_fichiers
        R1[Télécharger CSV]
        R2[Créer si absents]
        R3[Confirmer headers]
        R4[Afficher confirmation]
        RF --> R1 --> R2 --> R3 --> R4
    end

    %% 8. Quitter
    Menu --> Quit([8.Quitter le programme])